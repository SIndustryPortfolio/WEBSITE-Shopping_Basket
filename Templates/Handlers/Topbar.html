<!DOCTYPE html>

<html lang="en">

<script>
    window.Config = {}
    window.Config["CoreInfo"] = {{ CoreInfo | tojson }};
    window.Config["HostURL"] = "{{HostURL}}";
    window.Config["CurrentPageName"] = "{{CurrentPageName}}";
    window.Config["StaticPath"] = "{{url_for('static', filename='')}}";

    {% if Basket %}
        window.Config["Basket"] = {{ Basket.GetDict(JSON=True) | tojson }};
    {% endif %}


    window.Config["Products"] = [];

    let ProductInfo, ItemsInBasket;

    {% for Product in Products %}

        ProductInfo = {{ Product.GetDict(JSON=True) | tojson }};
        ItemsInBasket = {{Basket.GetItemsFromName(Product["Name"], JSON=True) | tojson}};

        ProductInfo["ImportedQuantity"] = ItemsInBasket.length;
        ProductInfo["Items"] = ItemsInBasket;

        window.Config["Products"].push(ProductInfo);
    {% endfor %}
</script>


<head>
    <!--INT-->    
    <!--STYLE SHEETS-->
    <link rel="stylesheet" href="{{url_for('static', filename='CSS/Shared.css')}}">
    <link rel="stylesheet" href="{{url_for('static', filename='CSS/' + CurrentPageName + '.css')}}">

    <!--EXT-->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-sRIl4kxILFvY47J16cr9ZwB07vP4J8+LH7qKQnuqkuIAvNWLzeN8tE5YBujZqJLB" crossorigin="anonymous">


    <!--MISC-->
    <link rel="icon" href="{{url_for('static', filename='Images/Icon.png')}}">
    <title>{{CoreInfo["Meta"]["Display Name"]}} | {{CurrentPageName}}</title>
</head>

<body>

    {% if RequestCount == 1 %}
        <div id="SplashScreenLoader" class="SplashScreenLoader"></div>
    {% endif %}

    <div class="ScrollingBackground"></div>

    <nav class="navbar navbar-expand-lg navbar-light bg-light" style="z-index: 2; display: flex; align-items: center; justify-content: left; flex-direction: row; height: 50px; padding-bottom: 10px; box-shadow: 0 10px 10px rgba(0, 0, 0, 0.08) !important;">
        <a class="navbar-brand" href="/" style="padding: 0 0 0 10px; ">{{CoreInfo["Meta"]["Display Name"]}}</a> <!--TRBL-->

        <ul class="navbar-nav text-center mr-auto" style="display: flex; flex-direction: row;">
            {% for PageName, PageInfo in Pages.items() %}
                <li class="nav-item active" style="padding-left: 10px;">
                    <a class="nav-link" href="{{PageInfo['Route']}}">
                        {% if CurrentPageName == PageName %}
                            <b>{{PageName}}</b>
                        {% else %}
                            {{PageName}}
                        {% endif %}
                    </a>
                </li>
            {% endfor %}
        </ul>
    </nav>
</body>

<script type="module">
    // CORE
    import PageModule from "{{url_for('static', filename='JS/Topbar.js')}}";

    // Functions
    // INIT
    PageModule.Initialise();
</script>

</html>